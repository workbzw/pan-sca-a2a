{
  "address": "0x6d5c277c8AFB1701CcC9301Dcf86C55E5040A544",
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "agentId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "AgentDeactivated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "agentId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "metadataURI",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "AgentRegistered",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "agentId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "newMetadataURI",
          "type": "string"
        }
      ],
      "name": "AgentUpdated",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "agentId",
          "type": "uint256"
        }
      ],
      "name": "agentExists",
      "outputs": [
        {
          "internalType": "bool",
          "name": "exists",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "agentId",
          "type": "uint256"
        }
      ],
      "name": "deactivateAgent",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "agentId",
          "type": "uint256"
        }
      ],
      "name": "getAgentIdentity",
      "outputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "owner",
              "type": "address"
            },
            {
              "internalType": "string",
              "name": "metadataURI",
              "type": "string"
            },
            {
              "internalType": "uint256",
              "name": "createdAt",
              "type": "uint256"
            },
            {
              "internalType": "bool",
              "name": "active",
              "type": "bool"
            }
          ],
          "internalType": "struct IdentityRegistry.AgentIdentity",
          "name": "identity",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "getOwnerAgents",
      "outputs": [
        {
          "internalType": "uint256[]",
          "name": "agentIds",
          "type": "uint256[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "identities",
      "outputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "metadataURI",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "createdAt",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "active",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "ownerAgents",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "metadataURI",
          "type": "string"
        }
      ],
      "name": "registerAgent",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "agentId",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "agentId",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "newMetadataURI",
          "type": "string"
        }
      ],
      "name": "updateAgentMetadata",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "transactionHash": "0x75f08fb217ba1081cdd57250f2ac16d55b183048283e9b0a75ec4dd9ecc02ec3",
  "receipt": {
    "to": null,
    "from": "0x74cC09316deab81EE874839e1DA9E84Ec066369C",
    "contractAddress": "0x6d5c277c8AFB1701CcC9301Dcf86C55E5040A544",
    "transactionIndex": 0,
    "gasUsed": "738519",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xad82051df18ff43dc56c660bcfad4ae40e0602baf69c13132c56291f6a33dc04",
    "transactionHash": "0x75f08fb217ba1081cdd57250f2ac16d55b183048283e9b0a75ec4dd9ecc02ec3",
    "logs": [],
    "blockNumber": 71023898,
    "cumulativeGasUsed": "738519",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 1,
  "solcInputHash": "82532c12664fad80c4d3b76a7b6c9ce6",
  "metadata": "{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"agentId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"AgentDeactivated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"agentId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"metadataURI\",\"type\":\"string\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"timestamp\",\"type\":\"uint256\"}],\"name\":\"AgentRegistered\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"agentId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"newMetadataURI\",\"type\":\"string\"}],\"name\":\"AgentUpdated\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"agentId\",\"type\":\"uint256\"}],\"name\":\"agentExists\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"exists\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"agentId\",\"type\":\"uint256\"}],\"name\":\"deactivateAgent\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"agentId\",\"type\":\"uint256\"}],\"name\":\"getAgentIdentity\",\"outputs\":[{\"components\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"string\",\"name\":\"metadataURI\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"createdAt\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"active\",\"type\":\"bool\"}],\"internalType\":\"struct IdentityRegistry.AgentIdentity\",\"name\":\"identity\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"getOwnerAgents\",\"outputs\":[{\"internalType\":\"uint256[]\",\"name\":\"agentIds\",\"type\":\"uint256[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"identities\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"string\",\"name\":\"metadataURI\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"createdAt\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"active\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"ownerAgents\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"metadataURI\",\"type\":\"string\"}],\"name\":\"registerAgent\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"agentId\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"agentId\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"newMetadataURI\",\"type\":\"string\"}],\"name\":\"updateAgentMetadata\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"\\u4e3a\\u6bcf\\u4e2a Agent \\u63d0\\u4f9b\\u552f\\u4e00\\u7684\\u94fe\\u4e0a\\u8eab\\u4efd\\u6807\\u8bc6\",\"kind\":\"dev\",\"methods\":{\"agentExists(uint256)\":{\"params\":{\"agentId\":\"Agent ID\"},\"returns\":{\"exists\":\"\\u662f\\u5426\\u5b58\\u5728\"}},\"deactivateAgent(uint256)\":{\"params\":{\"agentId\":\"Agent ID\"}},\"getAgentIdentity(uint256)\":{\"params\":{\"agentId\":\"Agent ID\"},\"returns\":{\"identity\":\"Agent \\u8eab\\u4efd\\u7ed3\\u6784\"}},\"getOwnerAgents(address)\":{\"params\":{\"owner\":\"\\u6240\\u6709\\u8005\\u5730\\u5740\"},\"returns\":{\"agentIds\":\"Agent ID \\u6570\\u7ec4\"}},\"registerAgent(string)\":{\"params\":{\"metadataURI\":\"IPFS \\u5143\\u6570\\u636e URI\"},\"returns\":{\"agentId\":\"\\u65b0\\u521b\\u5efa\\u7684 Agent ID\"}},\"updateAgentMetadata(uint256,string)\":{\"params\":{\"agentId\":\"Agent ID\",\"newMetadataURI\":\"\\u65b0\\u7684\\u5143\\u6570\\u636e URI\"}}},\"title\":\"IdentityRegistry\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"agentExists(uint256)\":{\"notice\":\"\\u68c0\\u67e5 Agent \\u662f\\u5426\\u5b58\\u5728\\u4e14\\u6fc0\\u6d3b\"},\"deactivateAgent(uint256)\":{\"notice\":\"\\u505c\\u7528 Agent\"},\"getAgentIdentity(uint256)\":{\"notice\":\"\\u83b7\\u53d6 Agent \\u8eab\\u4efd\\u4fe1\\u606f\"},\"getOwnerAgents(address)\":{\"notice\":\"\\u83b7\\u53d6\\u6240\\u6709\\u8005\\u62e5\\u6709\\u7684\\u6240\\u6709 Agent IDs\"},\"registerAgent(string)\":{\"notice\":\"\\u6ce8\\u518c\\u65b0\\u7684 Agent \\u8eab\\u4efd\"},\"updateAgentMetadata(uint256,string)\":{\"notice\":\"\\u66f4\\u65b0 Agent \\u5143\\u6570\\u636e\"}},\"notice\":\"EIP-8004 \\u8eab\\u4efd\\u6ce8\\u518c\\u8868\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/EIP8004/IdentityRegistry.sol\":\"IdentityRegistry\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"contracts/EIP8004/IdentityRegistry.sol\":{\"content\":\"//SPDX-License-Identifier: MIT\\npragma solidity >=0.8.0 <0.9.0;\\n\\n/**\\n * @title IdentityRegistry\\n * @notice EIP-8004 \\u8eab\\u4efd\\u6ce8\\u518c\\u8868\\n * @dev \\u4e3a\\u6bcf\\u4e2a Agent \\u63d0\\u4f9b\\u552f\\u4e00\\u7684\\u94fe\\u4e0a\\u8eab\\u4efd\\u6807\\u8bc6\\n */\\ncontract IdentityRegistry {\\n    struct AgentIdentity {\\n        address owner;           // Agent \\u6240\\u6709\\u8005\\u5730\\u5740\\n        string metadataURI;      // IPFS \\u5143\\u6570\\u636e URI\\n        uint256 createdAt;        // \\u521b\\u5efa\\u65f6\\u95f4\\u6233\\n        bool active;             // \\u662f\\u5426\\u6fc0\\u6d3b\\n    }\\n\\n    // Agent ID => Agent Identity\\n    mapping(uint256 => AgentIdentity) public identities;\\n    \\n    // Owner => Agent IDs\\n    mapping(address => uint256[]) public ownerAgents;\\n    \\n    // \\u4e0b\\u4e00\\u4e2a Agent ID\\n    uint256 private nextAgentId = 1;\\n    \\n    // \\u4e8b\\u4ef6\\n    event AgentRegistered(\\n        uint256 indexed agentId,\\n        address indexed owner,\\n        string metadataURI,\\n        uint256 timestamp\\n    );\\n    \\n    event AgentUpdated(\\n        uint256 indexed agentId,\\n        address indexed owner,\\n        string newMetadataURI\\n    );\\n    \\n    event AgentDeactivated(\\n        uint256 indexed agentId,\\n        address indexed owner\\n    );\\n\\n    /**\\n     * @notice \\u6ce8\\u518c\\u65b0\\u7684 Agent \\u8eab\\u4efd\\n     * @param metadataURI IPFS \\u5143\\u6570\\u636e URI\\n     * @return agentId \\u65b0\\u521b\\u5efa\\u7684 Agent ID\\n     */\\n    function registerAgent(string memory metadataURI) public returns (uint256 agentId) {\\n        agentId = nextAgentId++;\\n        \\n        identities[agentId] = AgentIdentity({\\n            owner: msg.sender,\\n            metadataURI: metadataURI,\\n            createdAt: block.timestamp,\\n            active: true\\n        });\\n        \\n        ownerAgents[msg.sender].push(agentId);\\n        \\n        emit AgentRegistered(agentId, msg.sender, metadataURI, block.timestamp);\\n        \\n        return agentId;\\n    }\\n\\n    /**\\n     * @notice \\u66f4\\u65b0 Agent \\u5143\\u6570\\u636e\\n     * @param agentId Agent ID\\n     * @param newMetadataURI \\u65b0\\u7684\\u5143\\u6570\\u636e URI\\n     */\\n    function updateAgentMetadata(uint256 agentId, string memory newMetadataURI) public {\\n        require(identities[agentId].owner == msg.sender, \\\"IdentityRegistry: Not owner\\\");\\n        require(identities[agentId].active, \\\"IdentityRegistry: Agent inactive\\\");\\n        \\n        identities[agentId].metadataURI = newMetadataURI;\\n        \\n        emit AgentUpdated(agentId, msg.sender, newMetadataURI);\\n    }\\n\\n    /**\\n     * @notice \\u505c\\u7528 Agent\\n     * @param agentId Agent ID\\n     */\\n    function deactivateAgent(uint256 agentId) public {\\n        require(identities[agentId].owner == msg.sender, \\\"IdentityRegistry: Not owner\\\");\\n        require(identities[agentId].active, \\\"IdentityRegistry: Already inactive\\\");\\n        \\n        identities[agentId].active = false;\\n        \\n        emit AgentDeactivated(agentId, msg.sender);\\n    }\\n\\n    /**\\n     * @notice \\u83b7\\u53d6 Agent \\u8eab\\u4efd\\u4fe1\\u606f\\n     * @param agentId Agent ID\\n     * @return identity Agent \\u8eab\\u4efd\\u7ed3\\u6784\\n     */\\n    function getAgentIdentity(uint256 agentId) public view returns (AgentIdentity memory identity) {\\n        return identities[agentId];\\n    }\\n\\n    /**\\n     * @notice \\u83b7\\u53d6\\u6240\\u6709\\u8005\\u62e5\\u6709\\u7684\\u6240\\u6709 Agent IDs\\n     * @param owner \\u6240\\u6709\\u8005\\u5730\\u5740\\n     * @return agentIds Agent ID \\u6570\\u7ec4\\n     */\\n    function getOwnerAgents(address owner) public view returns (uint256[] memory agentIds) {\\n        return ownerAgents[owner];\\n    }\\n\\n    /**\\n     * @notice \\u68c0\\u67e5 Agent \\u662f\\u5426\\u5b58\\u5728\\u4e14\\u6fc0\\u6d3b\\n     * @param agentId Agent ID\\n     * @return exists \\u662f\\u5426\\u5b58\\u5728\\n     */\\n    function agentExists(uint256 agentId) public view returns (bool exists) {\\n        return identities[agentId].owner != address(0) && identities[agentId].active;\\n    }\\n}\\n\\n\",\"keccak256\":\"0x41ef910e0c59173e9b3297e77cef0e4fcbe48c9c03dd234a7c75472ad3648cb0\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x6080604052600160025534801561001557600080fd5b50610bff806100256000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c80637585840a1161005b5780637585840a146100ff578063de99f1571461011f578063eaaf77e614610142578063ed72e9991461016557600080fd5b806311ba6b4a1461008d57806312f3a11d146100a25780632d2a9585146100cb57806362febe4f146100ec575b600080fd5b6100a061009b366004610766565b610178565b005b6100b56100b0366004610766565b610295565b6040516100c291906107c5565b60405180910390f35b6100de6100d93660046108b8565b6103a7565b6040519081526020016100c2565b6100de6100fa366004610911565b6104a4565b61011261010d36600461093b565b6104d5565b6040516100c2919061095d565b61013261012d366004610766565b610541565b60405190151581526020016100c2565b610155610150366004610766565b61057e565b6040516100c294939291906109a1565b6100a06101733660046109dd565b61063d565b6000818152602081905260409020546001600160a01b031633146101e35760405162461bcd60e51b815260206004820152601b60248201527f4964656e7469747952656769737472793a204e6f74206f776e6572000000000060448201526064015b60405180910390fd5b60008181526020819052604090206003015460ff1661024f5760405162461bcd60e51b815260206004820152602260248201527f4964656e7469747952656769737472793a20416c726561647920696e61637469604482015261766560f01b60648201526084016101da565b600081815260208190526040808220600301805460ff1916905551339183917f8648ea00a281362b7d17874fe879e4cf49d332d95bd73b71a649f9da06db1d4c9190a350565b6102cb604051806080016040528060006001600160a01b0316815260200160608152602001600081526020016000151581525090565b6000828152602081815260409182902082516080810190935280546001600160a01b03168352600181018054919284019161030590610a24565b80601f016020809104026020016040519081016040528092919081815260200182805461033190610a24565b801561037e5780601f106103535761010080835404028352916020019161037e565b820191906000526020600020905b81548152906001019060200180831161036157829003601f168201915b50505091835250506002820154602082015260039091015460ff16151560409091015292915050565b60028054600091826103b883610a5e565b90915550604080516080810182523381526020808201868152428385015260016060840181905260008681529283905293909120825181546001600160a01b0319166001600160a01b0390911617815590519394509092909182019061041e9082610ad4565b5060408281015160028301556060909201516003909101805460ff19169115159190911790553360008181526001602081815284832080549283018155835290912001839055905182907fc29f819ac362ff9c94de06666235808451aafd8894a2dffb86a080a965efeae3906104979086904290610b94565b60405180910390a3919050565b600160205281600052604060002081815481106104c057600080fd5b90600052602060002001600091509150505481565b6001600160a01b03811660009081526001602090815260409182902080548351818402810184019094528084526060939283018282801561053557602002820191906000526020600020905b815481526020019060010190808311610521575b50505050509050919050565b6000818152602081905260408120546001600160a01b031615801590610578575060008281526020819052604090206003015460ff165b92915050565b600060208190529081526040902080546001820180546001600160a01b0390921692916105aa90610a24565b80601f01602080910402602001604051908101604052809291908181526020018280546105d690610a24565b80156106235780601f106105f857610100808354040283529160200191610623565b820191906000526020600020905b81548152906001019060200180831161060657829003601f168201915b50505050600283015460039093015491929160ff16905084565b6000828152602081905260409020546001600160a01b031633146106a35760405162461bcd60e51b815260206004820152601b60248201527f4964656e7469747952656769737472793a204e6f74206f776e6572000000000060448201526064016101da565b60008281526020819052604090206003015460ff166107045760405162461bcd60e51b815260206004820181905260248201527f4964656e7469747952656769737472793a204167656e7420696e61637469766560448201526064016101da565b600082815260208190526040902060010161071f8282610ad4565b50336001600160a01b0316827fe86bf315326aaf0aad5c142e1969e8eecc4d7d98378f2f03a2d48a4b8b2b97fb8360405161075a9190610bb6565b60405180910390a35050565b60006020828403121561077857600080fd5b5035919050565b6000815180845260005b818110156107a557602081850181015186830182015201610789565b506000602082860101526020601f19601f83011685010191505092915050565b602080825282516001600160a01b031682820152820151608060408301526000906107f360a084018261077f565b9050604084015160608401526060840151151560808401528091505092915050565b634e487b7160e01b600052604160045260246000fd5b600082601f83011261083c57600080fd5b813567ffffffffffffffff8082111561085757610857610815565b604051601f8301601f19908116603f0116810190828211818310171561087f5761087f610815565b8160405283815286602085880101111561089857600080fd5b836020870160208301376000602085830101528094505050505092915050565b6000602082840312156108ca57600080fd5b813567ffffffffffffffff8111156108e157600080fd5b6108ed8482850161082b565b949350505050565b80356001600160a01b038116811461090c57600080fd5b919050565b6000806040838503121561092457600080fd5b61092d836108f5565b946020939093013593505050565b60006020828403121561094d57600080fd5b610956826108f5565b9392505050565b6020808252825182820181905260009190848201906040850190845b8181101561099557835183529284019291840191600101610979565b50909695505050505050565b6001600160a01b03851681526080602082018190526000906109c59083018661077f565b60408301949094525090151560609091015292915050565b600080604083850312156109f057600080fd5b82359150602083013567ffffffffffffffff811115610a0e57600080fd5b610a1a8582860161082b565b9150509250929050565b600181811c90821680610a3857607f821691505b602082108103610a5857634e487b7160e01b600052602260045260246000fd5b50919050565b600060018201610a7e57634e487b7160e01b600052601160045260246000fd5b5060010190565b601f821115610acf57600081815260208120601f850160051c81016020861015610aac5750805b601f850160051c820191505b81811015610acb57828155600101610ab8565b5050505b505050565b815167ffffffffffffffff811115610aee57610aee610815565b610b0281610afc8454610a24565b84610a85565b602080601f831160018114610b375760008415610b1f5750858301515b600019600386901b1c1916600185901b178555610acb565b600085815260208120601f198616915b82811015610b6657888601518255948401946001909101908401610b47565b5085821015610b845787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b604081526000610ba7604083018561077f565b90508260208301529392505050565b602081526000610956602083018461077f56fea2646970667358221220f65dd8dd42d2d80b9043a2f3a25403b7bcb1407332f620af40ce2f8dedb1dc4564736f6c63430008140033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100885760003560e01c80637585840a1161005b5780637585840a146100ff578063de99f1571461011f578063eaaf77e614610142578063ed72e9991461016557600080fd5b806311ba6b4a1461008d57806312f3a11d146100a25780632d2a9585146100cb57806362febe4f146100ec575b600080fd5b6100a061009b366004610766565b610178565b005b6100b56100b0366004610766565b610295565b6040516100c291906107c5565b60405180910390f35b6100de6100d93660046108b8565b6103a7565b6040519081526020016100c2565b6100de6100fa366004610911565b6104a4565b61011261010d36600461093b565b6104d5565b6040516100c2919061095d565b61013261012d366004610766565b610541565b60405190151581526020016100c2565b610155610150366004610766565b61057e565b6040516100c294939291906109a1565b6100a06101733660046109dd565b61063d565b6000818152602081905260409020546001600160a01b031633146101e35760405162461bcd60e51b815260206004820152601b60248201527f4964656e7469747952656769737472793a204e6f74206f776e6572000000000060448201526064015b60405180910390fd5b60008181526020819052604090206003015460ff1661024f5760405162461bcd60e51b815260206004820152602260248201527f4964656e7469747952656769737472793a20416c726561647920696e61637469604482015261766560f01b60648201526084016101da565b600081815260208190526040808220600301805460ff1916905551339183917f8648ea00a281362b7d17874fe879e4cf49d332d95bd73b71a649f9da06db1d4c9190a350565b6102cb604051806080016040528060006001600160a01b0316815260200160608152602001600081526020016000151581525090565b6000828152602081815260409182902082516080810190935280546001600160a01b03168352600181018054919284019161030590610a24565b80601f016020809104026020016040519081016040528092919081815260200182805461033190610a24565b801561037e5780601f106103535761010080835404028352916020019161037e565b820191906000526020600020905b81548152906001019060200180831161036157829003601f168201915b50505091835250506002820154602082015260039091015460ff16151560409091015292915050565b60028054600091826103b883610a5e565b90915550604080516080810182523381526020808201868152428385015260016060840181905260008681529283905293909120825181546001600160a01b0319166001600160a01b0390911617815590519394509092909182019061041e9082610ad4565b5060408281015160028301556060909201516003909101805460ff19169115159190911790553360008181526001602081815284832080549283018155835290912001839055905182907fc29f819ac362ff9c94de06666235808451aafd8894a2dffb86a080a965efeae3906104979086904290610b94565b60405180910390a3919050565b600160205281600052604060002081815481106104c057600080fd5b90600052602060002001600091509150505481565b6001600160a01b03811660009081526001602090815260409182902080548351818402810184019094528084526060939283018282801561053557602002820191906000526020600020905b815481526020019060010190808311610521575b50505050509050919050565b6000818152602081905260408120546001600160a01b031615801590610578575060008281526020819052604090206003015460ff165b92915050565b600060208190529081526040902080546001820180546001600160a01b0390921692916105aa90610a24565b80601f01602080910402602001604051908101604052809291908181526020018280546105d690610a24565b80156106235780601f106105f857610100808354040283529160200191610623565b820191906000526020600020905b81548152906001019060200180831161060657829003601f168201915b50505050600283015460039093015491929160ff16905084565b6000828152602081905260409020546001600160a01b031633146106a35760405162461bcd60e51b815260206004820152601b60248201527f4964656e7469747952656769737472793a204e6f74206f776e6572000000000060448201526064016101da565b60008281526020819052604090206003015460ff166107045760405162461bcd60e51b815260206004820181905260248201527f4964656e7469747952656769737472793a204167656e7420696e61637469766560448201526064016101da565b600082815260208190526040902060010161071f8282610ad4565b50336001600160a01b0316827fe86bf315326aaf0aad5c142e1969e8eecc4d7d98378f2f03a2d48a4b8b2b97fb8360405161075a9190610bb6565b60405180910390a35050565b60006020828403121561077857600080fd5b5035919050565b6000815180845260005b818110156107a557602081850181015186830182015201610789565b506000602082860101526020601f19601f83011685010191505092915050565b602080825282516001600160a01b031682820152820151608060408301526000906107f360a084018261077f565b9050604084015160608401526060840151151560808401528091505092915050565b634e487b7160e01b600052604160045260246000fd5b600082601f83011261083c57600080fd5b813567ffffffffffffffff8082111561085757610857610815565b604051601f8301601f19908116603f0116810190828211818310171561087f5761087f610815565b8160405283815286602085880101111561089857600080fd5b836020870160208301376000602085830101528094505050505092915050565b6000602082840312156108ca57600080fd5b813567ffffffffffffffff8111156108e157600080fd5b6108ed8482850161082b565b949350505050565b80356001600160a01b038116811461090c57600080fd5b919050565b6000806040838503121561092457600080fd5b61092d836108f5565b946020939093013593505050565b60006020828403121561094d57600080fd5b610956826108f5565b9392505050565b6020808252825182820181905260009190848201906040850190845b8181101561099557835183529284019291840191600101610979565b50909695505050505050565b6001600160a01b03851681526080602082018190526000906109c59083018661077f565b60408301949094525090151560609091015292915050565b600080604083850312156109f057600080fd5b82359150602083013567ffffffffffffffff811115610a0e57600080fd5b610a1a8582860161082b565b9150509250929050565b600181811c90821680610a3857607f821691505b602082108103610a5857634e487b7160e01b600052602260045260246000fd5b50919050565b600060018201610a7e57634e487b7160e01b600052601160045260246000fd5b5060010190565b601f821115610acf57600081815260208120601f850160051c81016020861015610aac5750805b601f850160051c820191505b81811015610acb57828155600101610ab8565b5050505b505050565b815167ffffffffffffffff811115610aee57610aee610815565b610b0281610afc8454610a24565b84610a85565b602080601f831160018114610b375760008415610b1f5750858301515b600019600386901b1c1916600185901b178555610acb565b600085815260208120601f198616915b82811015610b6657888601518255948401946001909101908401610b47565b5085821015610b845787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b604081526000610ba7604083018561077f565b90508260208301529392505050565b602081526000610956602083018461077f56fea2646970667358221220f65dd8dd42d2d80b9043a2f3a25403b7bcb1407332f620af40ce2f8dedb1dc4564736f6c63430008140033",
  "devdoc": {
    "details": "为每个 Agent 提供唯一的链上身份标识",
    "kind": "dev",
    "methods": {
      "agentExists(uint256)": {
        "params": {
          "agentId": "Agent ID"
        },
        "returns": {
          "exists": "是否存在"
        }
      },
      "deactivateAgent(uint256)": {
        "params": {
          "agentId": "Agent ID"
        }
      },
      "getAgentIdentity(uint256)": {
        "params": {
          "agentId": "Agent ID"
        },
        "returns": {
          "identity": "Agent 身份结构"
        }
      },
      "getOwnerAgents(address)": {
        "params": {
          "owner": "所有者地址"
        },
        "returns": {
          "agentIds": "Agent ID 数组"
        }
      },
      "registerAgent(string)": {
        "params": {
          "metadataURI": "IPFS 元数据 URI"
        },
        "returns": {
          "agentId": "新创建的 Agent ID"
        }
      },
      "updateAgentMetadata(uint256,string)": {
        "params": {
          "agentId": "Agent ID",
          "newMetadataURI": "新的元数据 URI"
        }
      }
    },
    "title": "IdentityRegistry",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "agentExists(uint256)": {
        "notice": "检查 Agent 是否存在且激活"
      },
      "deactivateAgent(uint256)": {
        "notice": "停用 Agent"
      },
      "getAgentIdentity(uint256)": {
        "notice": "获取 Agent 身份信息"
      },
      "getOwnerAgents(address)": {
        "notice": "获取所有者拥有的所有 Agent IDs"
      },
      "registerAgent(string)": {
        "notice": "注册新的 Agent 身份"
      },
      "updateAgentMetadata(uint256,string)": {
        "notice": "更新 Agent 元数据"
      }
    },
    "notice": "EIP-8004 身份注册表",
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 442,
        "contract": "contracts/EIP8004/IdentityRegistry.sol:IdentityRegistry",
        "label": "identities",
        "offset": 0,
        "slot": "0",
        "type": "t_mapping(t_uint256,t_struct(AgentIdentity)437_storage)"
      },
      {
        "astId": 447,
        "contract": "contracts/EIP8004/IdentityRegistry.sol:IdentityRegistry",
        "label": "ownerAgents",
        "offset": 0,
        "slot": "1",
        "type": "t_mapping(t_address,t_array(t_uint256)dyn_storage)"
      },
      {
        "astId": 450,
        "contract": "contracts/EIP8004/IdentityRegistry.sol:IdentityRegistry",
        "label": "nextAgentId",
        "offset": 0,
        "slot": "2",
        "type": "t_uint256"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_array(t_uint256)dyn_storage": {
        "base": "t_uint256",
        "encoding": "dynamic_array",
        "label": "uint256[]",
        "numberOfBytes": "32"
      },
      "t_bool": {
        "encoding": "inplace",
        "label": "bool",
        "numberOfBytes": "1"
      },
      "t_mapping(t_address,t_array(t_uint256)dyn_storage)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => uint256[])",
        "numberOfBytes": "32",
        "value": "t_array(t_uint256)dyn_storage"
      },
      "t_mapping(t_uint256,t_struct(AgentIdentity)437_storage)": {
        "encoding": "mapping",
        "key": "t_uint256",
        "label": "mapping(uint256 => struct IdentityRegistry.AgentIdentity)",
        "numberOfBytes": "32",
        "value": "t_struct(AgentIdentity)437_storage"
      },
      "t_string_storage": {
        "encoding": "bytes",
        "label": "string",
        "numberOfBytes": "32"
      },
      "t_struct(AgentIdentity)437_storage": {
        "encoding": "inplace",
        "label": "struct IdentityRegistry.AgentIdentity",
        "members": [
          {
            "astId": 430,
            "contract": "contracts/EIP8004/IdentityRegistry.sol:IdentityRegistry",
            "label": "owner",
            "offset": 0,
            "slot": "0",
            "type": "t_address"
          },
          {
            "astId": 432,
            "contract": "contracts/EIP8004/IdentityRegistry.sol:IdentityRegistry",
            "label": "metadataURI",
            "offset": 0,
            "slot": "1",
            "type": "t_string_storage"
          },
          {
            "astId": 434,
            "contract": "contracts/EIP8004/IdentityRegistry.sol:IdentityRegistry",
            "label": "createdAt",
            "offset": 0,
            "slot": "2",
            "type": "t_uint256"
          },
          {
            "astId": 436,
            "contract": "contracts/EIP8004/IdentityRegistry.sol:IdentityRegistry",
            "label": "active",
            "offset": 0,
            "slot": "3",
            "type": "t_bool"
          }
        ],
        "numberOfBytes": "128"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      }
    }
  }
}